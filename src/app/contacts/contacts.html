<div class="p-6 bg-gray-50 min-h-screen">
  <div class="flex items-center mb-6 gap-4">
  <img src="https://cdn.leasity.cl/assets/images/logo/full-gradient-large.png" alt="Editar" class="max-w-20 max-h-20">
  <h1 class="text-2xl font-bold mb-4">Lista de Contactos</h1>
  </div>

  @if (isLoading){
    <div class="flex justify-center items-center h-64">
      <div class="loader ease-linear rounded-full border-8 border-t-8 border-gray-200 h-16 w-16"></div>
    </div>
  } @else if (contacts.length === 0) {
    <div class="text-center text-gray-500 mt-20">
      No hay contactos disponibles.
    </div>
  } @else {

  <table class="min-w-full bg-white rounded-lg shadow">
    <thead class="bg-gray-100 border-b">
    <tr>
      <th class="px-6 py-3 text-left">Nombre</th>
      <th class="px-6 py-3 text-left">Email</th>
      <th class="px-6 py-3 text-left">RUT</th>
      <th class="px-6 py-3 text-left">Tags</th>
      <th class="px-6 py-3 text-right">Acci√≥n</th>
    </tr>
    </thead>
    <tbody>
      @for (contact of contacts; track contact.id) {
        <tr class="border-b hover:bg-gray-50 transition">
          <td class="px-6 py-3 font-medium">{{ contact.name }}</td>
          <td class="px-6 py-3">{{ contact.email }}</td>
          <td class="px-6 py-3">{{ contact.rut }}</td>
          <td class="px-6 py-3">
            <div class="flex gap-2 flex-wrap">
              @for (tag of contact.tags; track tag) {
                <span
                  class="bg-blue-100 text-blue-700 text-sm px-2 py-1 rounded-full"
                >
                  {{ tag }}
                </span>
              }
            </div>
          </td>
          <td class="px-6 py-3 text-right">
            <button
              (click)="openSidebar(contact)"
              class="text-blue-600 hover:text-blue-800 focus:outline-none cursor-pointer"
            >
              <lucide-angular [img]="PencilIcon" class="my-icon"></lucide-angular>
            </button>
          </td>
        </tr>
      }
    </tbody>
  </table>}
  @if (sidebarOpen && selectedContact) {
    <app-sidebar
      [contact]="selectedContact!"
      (close)="closeSidebar()"
      (save)="saveContact($event)"
    ></app-sidebar>
  }


</div>
